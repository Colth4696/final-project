{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = require(\"react\");\n\nvar PropTypes = require(\"prop-types\");\n\nvar actioncable = require(\"actioncable\");\n\nvar createReactClass = require(\"create-react-class\");\n\nvar {\n  Provider,\n  Consumer\n} = React.createContext();\nvar ActionCableProvider = createReactClass({\n  componentWillMount: function () {\n    if (this.props.cable) {\n      this.cable = this.props.cable;\n    } else {\n      this.cable = actioncable.createConsumer(this.props.url);\n    }\n  },\n  componentWillUnmount: function () {\n    if (!this.props.cable && this.cable) {\n      this.cable.disconnect();\n    }\n  },\n  componentWillReceiveProps: function (nextProps) {\n    // Props not changed\n    if (this.props.cable === nextProps.cable && this.props.url === nextProps.url) {\n      return;\n    } // cable is created by self, disconnect it\n\n\n    this.componentWillUnmount(); // create or assign cable\n\n    this.componentWillMount();\n  },\n  render: function () {\n    return React.createElement(Provider, {\n      value: {\n        cable: this.cable\n      }\n    }, this.props.children || null);\n  }\n});\nActionCableProvider.displayName = \"ActionCableProvider\";\nActionCableProvider.propTypes = {\n  cable: PropTypes.object,\n  url: PropTypes.string,\n  children: PropTypes.any\n};\nvar ActionCableController = createReactClass({\n  componentDidMount: function () {\n    var self = this;\n    var _props = this.props;\n    var onReceived = _props.onReceived;\n    var onInitialized = _props.onInitialized;\n    var onConnected = _props.onConnected;\n    var onDisconnected = _props.onDisconnected;\n    var onRejected = _props.onRejected;\n    console.log('this.props.cable', this.props.cable);\n    this.cable = this.props.cable.subscriptions.create(this.props.channel, {\n      received: function (data) {\n        onReceived && onReceived(data);\n      },\n      initialized: function () {\n        onInitialized && onInitialized();\n      },\n      connected: function () {\n        onConnected && onConnected();\n      },\n      disconnected: function () {\n        onDisconnected && onDisconnected();\n      },\n      rejected: function () {\n        onRejected && onRejected();\n      }\n    });\n  },\n  componentWillUnmount: function () {\n    if (this.cable) {\n      this.props.cable.subscriptions.remove(this.cable);\n      this.cable = null;\n    }\n  },\n  send: function (data) {\n    if (!this.cable) {\n      throw new Error(\"ActionCable component unloaded\");\n    }\n\n    this.cable.send(data);\n  },\n  perform: function (action, data) {\n    if (!this.cable) {\n      throw new Error(\"ActionCable component unloaded\");\n    }\n\n    this.cable.perform(action, data);\n  },\n  render: function () {\n    return this.props.children || null;\n  }\n});\nActionCableController.displayName = \"ActionCableController\";\nActionCableController.propTypes = {\n  cable: PropTypes.object,\n  onReceived: PropTypes.func,\n  onInitialized: PropTypes.func,\n  onConnected: PropTypes.func,\n  onDisconnected: PropTypes.func,\n  onRejected: PropTypes.func,\n  children: PropTypes.any\n};\nvar ActionCableConsumer = React.forwardRef(function (props, ref) {\n  var Component = createReactClass({\n    render: function () {\n      return React.createElement(Consumer, null, ({\n        cable\n      }) => {\n        return React.createElement(ActionCableController, {\n          cable,\n          ...this.props,\n          ref: this.props.forwardedRef\n        }, this.props.children || null);\n      });\n    }\n  });\n  Component.displayName = \"ActionCableConsumer\";\n  Component.propTypes = {\n    onReceived: PropTypes.func,\n    onInitialized: PropTypes.func,\n    onConnected: PropTypes.func,\n    onDisconnected: PropTypes.func,\n    onRejected: PropTypes.func,\n    children: PropTypes.any\n  };\n  return React.createElement(Component, { ...props,\n    forwardedRef: ref\n  }, props.children || null);\n});\nvar ActionCable = createReactClass({\n  componentDidMount: function () {\n    console.warn(\"DEPRECATION WARNING: The <ActionCable /> component has been deprecated and will be removed in a future release. Use <ActionCableConsumer /> instead.\");\n  },\n  render: function () {\n    return React.createElement(ActionCableConsumer, { ...this.props\n    }, this.props.children || null);\n  }\n});\nActionCable.displayName = \"ActionCable\";\nActionCable.propTypes = {\n  onReceived: PropTypes.func,\n  onInitialized: PropTypes.func,\n  onConnected: PropTypes.func,\n  onDisconnected: PropTypes.func,\n  onRejected: PropTypes.func,\n  children: PropTypes.any\n};\nexports.ActionCable = ActionCable;\nexports.ActionCableConsumer = ActionCableConsumer;\nexports.ActionCableController = ActionCableController;\nexports.ActionCableProvider = ActionCableProvider; // Compatible old usage\n\nexports.default = ActionCableProvider;","map":{"version":3,"sources":["/Users/jameshafer/Downloads/client_side-main/node_modules/react-actioncable-provider/lib/index.js"],"names":["Object","defineProperty","exports","value","React","require","PropTypes","actioncable","createReactClass","Provider","Consumer","createContext","ActionCableProvider","componentWillMount","props","cable","createConsumer","url","componentWillUnmount","disconnect","componentWillReceiveProps","nextProps","render","createElement","children","displayName","propTypes","object","string","any","ActionCableController","componentDidMount","self","_props","onReceived","onInitialized","onConnected","onDisconnected","onRejected","console","log","subscriptions","create","channel","received","data","initialized","connected","disconnected","rejected","remove","send","Error","perform","action","func","ActionCableConsumer","forwardRef","ref","Component","forwardedRef","ActionCable","warn","default"],"mappings":"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","sourcesContent":["\"use strict\"\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n})\n\nvar React = require(\"react\")\nvar PropTypes = require(\"prop-types\")\nvar actioncable = require(\"actioncable\")\nvar createReactClass = require(\"create-react-class\")\nvar { Provider, Consumer } = React.createContext()\n\nvar ActionCableProvider = createReactClass({\n  componentWillMount: function () {\n    if (this.props.cable) {\n      this.cable = this.props.cable\n    } else {\n      this.cable = actioncable.createConsumer(this.props.url)\n    }\n  },\n\n  componentWillUnmount: function () {\n    if (!this.props.cable && this.cable) {\n      this.cable.disconnect()\n    }\n  },\n\n  componentWillReceiveProps: function (nextProps) {\n    // Props not changed\n    if (\n      this.props.cable === nextProps.cable &&\n      this.props.url === nextProps.url\n    ) {\n      return\n    }\n\n    // cable is created by self, disconnect it\n    this.componentWillUnmount()\n\n    // create or assign cable\n    this.componentWillMount()\n  },\n\n  render: function () {\n    return React.createElement(\n      Provider,\n      {\n        value: {\n          cable: this.cable\n        }\n      },\n      this.props.children || null\n    )\n  }\n})\n\nActionCableProvider.displayName = \"ActionCableProvider\"\n\nActionCableProvider.propTypes = {\n  cable: PropTypes.object,\n  url: PropTypes.string,\n  children: PropTypes.any\n}\n\nvar ActionCableController = createReactClass({\n  componentDidMount: function () {\n    var self = this\n    var _props = this.props\n\n    var onReceived = _props.onReceived\n\n    var onInitialized = _props.onInitialized\n\n    var onConnected = _props.onConnected\n\n    var onDisconnected = _props.onDisconnected\n\n    var onRejected = _props.onRejected\n    console.log('this.props.cable', this.props.cable)\n    this.cable = this.props.cable.subscriptions.create(this.props.channel, {\n      received: function (data) {\n        onReceived && onReceived(data)\n      },\n      initialized: function () {\n        onInitialized && onInitialized()\n      },\n      connected: function () {\n        onConnected && onConnected()\n      },\n      disconnected: function () {\n        onDisconnected && onDisconnected()\n      },\n      rejected: function () {\n        onRejected && onRejected()\n      }\n    })\n  },\n\n  componentWillUnmount: function () {\n    if (this.cable) {\n      this.props.cable.subscriptions.remove(this.cable)\n      this.cable = null\n    }\n  },\n\n  send: function (data) {\n    if (!this.cable) {\n      throw new Error(\"ActionCable component unloaded\")\n    }\n\n    this.cable.send(data)\n  },\n\n  perform: function (action, data) {\n    if (!this.cable) {\n      throw new Error(\"ActionCable component unloaded\")\n    }\n\n    this.cable.perform(action, data)\n  },\n\n  render: function () {\n    return this.props.children || null\n  }\n})\n\nActionCableController.displayName = \"ActionCableController\"\n\nActionCableController.propTypes = {\n  cable: PropTypes.object,\n  onReceived: PropTypes.func,\n  onInitialized: PropTypes.func,\n  onConnected: PropTypes.func,\n  onDisconnected: PropTypes.func,\n  onRejected: PropTypes.func,\n  children: PropTypes.any\n}\n\nvar ActionCableConsumer = React.forwardRef(function (props, ref) {\n  var Component = createReactClass({\n    render: function () {\n      return React.createElement(Consumer, null, ({ cable }) => {\n        return React.createElement(\n          ActionCableController,\n          {\n            cable,\n            ...this.props,\n            ref: this.props.forwardedRef\n          },\n          this.props.children || null\n        )\n      })\n    }\n  })\n\n  Component.displayName = \"ActionCableConsumer\"\n\n  Component.propTypes = {\n    onReceived: PropTypes.func,\n    onInitialized: PropTypes.func,\n    onConnected: PropTypes.func,\n    onDisconnected: PropTypes.func,\n    onRejected: PropTypes.func,\n    children: PropTypes.any\n  }\n\n  return React.createElement(\n    Component,\n    {\n      ...props,\n      forwardedRef: ref\n    },\n    props.children || null\n  )\n})\n\nvar ActionCable = createReactClass({\n  componentDidMount: function () {\n    console.warn(\n      \"DEPRECATION WARNING: The <ActionCable /> component has been deprecated and will be removed in a future release. Use <ActionCableConsumer /> instead.\"\n    )\n  },\n  render: function () {\n    return React.createElement(\n      ActionCableConsumer,\n      { ...this.props },\n      this.props.children || null\n    )\n  }\n})\n\nActionCable.displayName = \"ActionCable\"\n\nActionCable.propTypes = {\n  onReceived: PropTypes.func,\n  onInitialized: PropTypes.func,\n  onConnected: PropTypes.func,\n  onDisconnected: PropTypes.func,\n  onRejected: PropTypes.func,\n  children: PropTypes.any\n}\n\nexports.ActionCable = ActionCable\nexports.ActionCableConsumer = ActionCableConsumer\nexports.ActionCableController = ActionCableController\nexports.ActionCableProvider = ActionCableProvider\n\n// Compatible old usage\nexports.default = ActionCableProvider\n"]},"metadata":{},"sourceType":"script"}