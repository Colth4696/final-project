{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _defineProperty from\"/Users/colthafer/final-project/client_side-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/colthafer/final-project/client_side-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/colthafer/final-project/client_side-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/colthafer/final-project/client_side-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/colthafer/final-project/client_side-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import{Link}from'react-router-dom';var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.handleChange=function(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;_this.setState(_defineProperty({},name,value));};_this.handleSubmit=function(event){event.preventDefault();var _this$state=_this.state,email=_this$state.email,password=_this$state.password;var user={email:email,password:password};axios.post('https://neighboraid.herokuapp.com/login',{user:user},{withCredentials:true}).then(function(response){if(response.data.logged_in){_this.props.handleLogin(response.data);_this.redirect();}else{_this.setState({errors:response.data.errors});}}).catch(function(error){return console.log('api errors:',error);});};_this.redirect=function(){_this.props.history.push('/');};_this.handleErrors=function(){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"ul\",{children:_this.state.errors.map(function(error){return/*#__PURE__*/_jsx(\"li\",{children:error},error);})})});};_this.state={user:[],email:'',password:'',errors:''};return _this;}_createClass(Login,[{key:\"componentWillMount\",value:function componentWillMount(){return this.props.loggedInStatus?this.redirect():null;}},{key:\"render\",value:function render(){var _this$state2=this.state,email=_this$state2.email,password=_this$state2.password;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Log In\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"email\",type:\"text\",name:\"email\",value:email,onChange:this.handleChange}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"password\",type:\"password\",name:\"password\",value:password,onChange:this.handleChange}),/*#__PURE__*/_jsx(\"button\",{placeholder:\"submit\",type:\"submit\",children:\"Log In\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"or \",/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"sign up\"})]})]}),/*#__PURE__*/_jsx(\"div\",{children:this.state.errors?this.handleErrors():null})]});}}]);return Login;}(Component);export default Login;","map":{"version":3,"sources":["/Users/colthafer/final-project/client_side-main/src/components/registrations/Login.js"],"names":["React","Component","axios","Link","Login","props","handleChange","event","target","name","value","setState","handleSubmit","preventDefault","state","email","password","user","post","withCredentials","then","response","data","logged_in","handleLogin","redirect","errors","catch","error","console","log","history","push","handleErrors","map","loggedInStatus"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios'\r\nimport {Link} from 'react-router-dom'\r\n\r\nclass Login extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { \r\n      user: [],\r\n      email: '',\r\n      password: '',\r\n      errors: ''\r\n     };\r\n  }\r\n  componentWillMount() {\r\n    return this.props.loggedInStatus ? this.redirect() : null\r\n  }\r\nhandleChange = (event) => {\r\n    const {name, value} = event.target\r\n    this.setState({\r\n      [name]: value\r\n    })\r\n  };\r\nhandleSubmit = (event) => {\r\n    event.preventDefault()\r\n    const {email, password} = this.state\r\nlet user = {\r\n      email: email,\r\n      password: password\r\n    }\r\n    \r\n    axios.post('https://neighboraid.herokuapp.com/login', {user}, {withCredentials: true})\r\n    .then(response => {\r\n      if (response.data.logged_in) {\r\n        this.props.handleLogin(response.data)\r\n        this.redirect()\r\n      } else {\r\n        this.setState({\r\n          errors: response.data.errors\r\n        })\r\n      }\r\n    })\r\n    .catch(error => console.log('api errors:', error))\r\n  };\r\nredirect = () => {\r\n    this.props.history.push('/')\r\n  }\r\nhandleErrors = () => {\r\n    return (\r\n      <div>\r\n        <ul>\r\n        {this.state.errors.map(error => {\r\n        return <li key={error}>{error}</li>\r\n          })\r\n        }\r\n        </ul>\r\n      </div>\r\n    )\r\n  }\r\nrender() {\r\n    const {email, password} = this.state\r\nreturn (\r\n      <div>\r\n        <h1>Log In</h1>\r\n        <form onSubmit={this.handleSubmit}>\r\n          <input\r\n            placeholder=\"email\"\r\n            type=\"text\"\r\n            name=\"email\"\r\n            value={email}\r\n            onChange={this.handleChange}\r\n          />\r\n          <input\r\n            placeholder=\"password\"\r\n            type=\"password\"\r\n            name=\"password\"\r\n            value={password}\r\n            onChange={this.handleChange}\r\n          />\r\n          <button placeholder=\"submit\" type=\"submit\">\r\n            Log In\r\n          </button>\r\n          <div>\r\n            or <Link to='/signup'>sign up</Link>\r\n          </div>\r\n          \r\n          </form>\r\n          <div>\r\n          {\r\n            this.state.errors ? this.handleErrors() : null\r\n          }\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}