{"ast":null,"code":"import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import _slicedToArray from\"/Users/colthafer/final-project/client_side-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import{Redirect}from\"react-router-dom\";import{Marker,InfoWindow}from\"react-google-maps\";import RedIcon from\"./red-user-icon.png\";import GreenIcon from\"./green-home-icon.png\";import axios from\"axios\";import ModalChat from\"./ChatModal\";var MyMarker=function MyMarker(props){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),flag=_React$useState2[0],setFlag=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),chat=_React$useState4[0],setChat=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),volunteer=_React$useState6[0],setVolunteer=_React$useState6[1];var toggle_open=function toggle_open(){setFlag(!flag);};var getIcon=function getIcon(){if(props.request.category===\"Material\"){return RedIcon;}else{return GreenIcon;}};var makeVolunteer=function makeVolunteer(){var volunteer={request_id:props.request.id,user_id:props.user.id};console.log(props.user);console.log(volunteer);axios.post(\"https://neighboraid.herokuapp.com/volunteers\",{volunteer:volunteer}).then(function(response){console.log(response.data);if(response.data.status===\"created\"){setChat(true);setVolunteer(response.data.volunteer);}}).catch(function(error){console.error(\"error:\".concat(error));});};var MarkStyle={height:\"30px\",width:\"30px\"};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Marker,{style:MarkStyle,position:props.position,onClick:toggle_open,icon:getIcon(),children:flag&&/*#__PURE__*/_jsx(InfoWindow,{onCloseClick:toggle_open,user:props.user,children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Task ID:\",props.request.id]}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Requester ID:\",props.request.user_id]}),/*#__PURE__*/_jsx(\"h1\",{children:props.request.title}),/*#__PURE__*/_jsx(\"h3\",{children:props.request.description}),!chat?/*#__PURE__*/_jsx(\"button\",{onClick:makeVolunteer,children:\"Volunteer\"}):'']})})}),chat&&/*#__PURE__*/_jsx(ModalChat,{request:props.request,volunteer:volunteer})]});};export default MyMarker;","map":{"version":3,"sources":["/Users/colthafer/final-project/client_side-main/src/MyMarker.js"],"names":["React","Redirect","Marker","InfoWindow","RedIcon","GreenIcon","axios","ModalChat","MyMarker","props","useState","flag","setFlag","chat","setChat","volunteer","setVolunteer","toggle_open","getIcon","request","category","makeVolunteer","request_id","id","user_id","user","console","log","post","then","response","data","status","catch","error","MarkStyle","height","width","position","title","description"],"mappings":"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","sourcesContent":["\r\nimport React from \"react\"\r\nimport { Redirect } from \"react-router-dom\"\r\nimport { Marker, InfoWindow } from \"react-google-maps\"\r\nimport RedIcon from \"./red-user-icon.png\"\r\nimport GreenIcon from \"./green-home-icon.png\"\r\nimport axios from \"axios\"\r\nimport ModalChat from \"./ChatModal\"\r\n\r\n\r\nconst MyMarker = (props) => {\r\n const [flag, setFlag] = React.useState(false);\r\n const [chat, setChat] = React.useState(false);\r\n const [volunteer, setVolunteer] = React.useState(false);\r\n\r\n   const toggle_open = () => {\r\n    setFlag(!flag)\r\n  }\r\n \r\n  const  getIcon = () => {\r\n    if (props.request.category === \"Material\" ) { return RedIcon }\r\n    else { return GreenIcon }\r\n  }\r\n\r\n  const makeVolunteer = () => {\r\n    const volunteer = {\r\n      request_id: props.request.id,\r\n      user_id: props.user.id\r\n    }\r\n      console.log(props.user)\r\n      console.log(volunteer)\r\n      axios.post(\"https://neighboraid.herokuapp.com/volunteers\", {volunteer})\r\n        .then(response => {\r\n          console.log(response.data)\r\n          if (response.data.status === \"created\") {\r\n            setChat(true)\r\n            setVolunteer(response.data.volunteer)\r\n          } \r\n        })\r\n        .catch(error => {\r\n          console.error(`error:${error}`)\r\n        })\r\n  }\r\n\r\n    const MarkStyle = {\r\n      height: \"30px\",\r\n      width: \"30px\"\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <Marker\r\n          style={MarkStyle}\r\n          position={props.position}\r\n          onClick={toggle_open}\r\n          icon={getIcon()}>\r\n            \r\n          {flag && <InfoWindow onCloseClick={toggle_open} user={props.user}>\r\n\r\n            <div>\r\n              <h4>Task ID:{props.request.id}</h4>\r\n              <h4>Requester ID:{props.request.user_id}</h4>\r\n              <h1>{props.request.title}</h1>\r\n              <h3>{props.request.description}</h3>\r\n              {!chat ? <button onClick={makeVolunteer}>Volunteer</button>: ''}\r\n             </div>\r\n          </InfoWindow>}\r\n        </Marker>\r\n        {chat && <ModalChat request={props.request} volunteer={volunteer}/>}\r\n      </div>\r\n    )\r\n    }\r\n    \r\n\r\n\r\nexport default MyMarker"]},"metadata":{},"sourceType":"module"}